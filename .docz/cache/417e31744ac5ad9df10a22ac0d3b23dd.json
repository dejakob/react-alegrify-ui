{"remainingRequest":"/Users/jakobkerkhove/alegrify/react-alegrify-ui/node_modules/docz-core/node_modules/babel-loader/lib/index.js?{\"presets\":[\"@babel/preset-env\",\"@babel/preset-react\",[\"/Users/jakobkerkhove/alegrify/react-alegrify-ui/node_modules/babel-preset-docz/dist/index.js\",{\"flow\":true,\"typescript\":false,\"parseProps\":true}]],\"plugins\":[[\"/Users/jakobkerkhove/alegrify/react-alegrify-ui/node_modules/docz-utils/lib/named-asset-import.js\",{\"loaderMap\":{\"svg\":{\"ReactComponent\":\"@svgr/webpack?-prettier,-svgo![path]\"}}}],\"/Users/jakobkerkhove/alegrify/react-alegrify-ui/node_modules/react-hot-loader/babel.js\"],\"babelrc\":false,\"cacheCompression\":false,\"compact\":false}!/Users/jakobkerkhove/alegrify/react-alegrify-ui/lib/week-schedule/index.js","dependencies":[{"path":"/Users/jakobkerkhove/alegrify/react-alegrify-ui/lib/week-schedule/index.js","mtime":1540500553900},{"path":"/Users/jakobkerkhove/alegrify/react-alegrify-ui/node_modules/cache-loader/dist/cjs.js","mtime":1551899788855},{"path":"/Users/jakobkerkhove/alegrify/react-alegrify-ui/node_modules/docz-core/node_modules/babel-loader/lib/index.js","mtime":1551376331885}],"contextDependencies":[],"result":["(function () {\n  var enterModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).enterModule;\n  enterModule && enterModule(module);\n})();\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _nonIterableSpread(); }\n\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance\"); }\n\nfunction _iterableToArray(iter) { if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter); }\n\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\n/*\n\n    TODOS\n    =============\n\n    * Multitouch resize gesture\n    * Test in other timezones\n    * Button to add range\n    * Caniuse clientX/clientY? => Seems like it\n    * what about days that are not 86400s\n    * Test RTL\n\n*/\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\nimport WeekScheduleView from './view';\nimport { DEFAULT_CELL_HEIGHT, DEFAULT_CELL_WIDTH, DEFAULT_HOURS_PER_CELL, DEFAULT_CELLS_PER_TIME_LABEL } from './constants';\nimport { getCursorOrTouchPosition } from './helpers';\n\nvar rangeEquals = function rangeEquals(rangeA, rangeB) {\n  var strA = (rangeA || []).map(function (range) {\n    return \"\".concat(range.from, \"-\").concat(range.till);\n  }).join('|');\n  var strB = (rangeB || []).map(function (range) {\n    return \"\".concat(range.from, \"-\").concat(range.till);\n  }).join('|');\n  return strA === strB;\n};\n\nvar WeekSchedule =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(WeekSchedule, _Component);\n\n  function WeekSchedule() {\n    var _this;\n\n    _classCallCheck(this, WeekSchedule);\n\n    _this = _possibleConstructorReturn(this, _getPrototypeOf(WeekSchedule).call(this));\n    _this.handleRangeMouseDown = _this.handleRangeMouseDown.bind(_assertThisInitialized(_this));\n    _this.handleGenericMouseMove = _this.handleGenericMouseMove.bind(_assertThisInitialized(_this));\n    _this.handleBodyMouseUp = _this.handleBodyMouseUp.bind(_assertThisInitialized(_this));\n    _this.handleTableClick = _this.handleTableClick.bind(_assertThisInitialized(_this));\n    return _this;\n  }\n\n  _createClass(WeekSchedule, [{\n    key: \"componentWillMount\",\n    value: function componentWillMount() {\n      this.setState({\n        selectedRangeIndex: null,\n        ranges: this.props.ranges || []\n      });\n      this.mouseDownOffset = {\n        x: null,\n        y: null\n      };\n\n      if (typeof document !== 'undefined' && typeof document.body !== 'undefined' && typeof document.body.addEventListener === 'function') {\n        document.addEventListener('mouseup', this.handleBodyMouseUp);\n        document.addEventListener('touchend', this.handleBodyMouseUp);\n      }\n    }\n  }, {\n    key: \"componentWillReceiveProps\",\n    value: function componentWillReceiveProps(newProps) {\n      if (!rangeEquals(newProps.ranges, this.props.ranges)) {\n        this.setState({\n          selectedRangeIndex: null,\n          ranges: this.props.ranges || []\n        });\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      if (typeof document !== 'undefined' && typeof document.body !== 'undefined' && typeof document.body.removeEventListener === 'function') {\n        document.removeEventListener('mouseup', this.handleBodyMouseUp);\n        document.addEventListener('touchend', this.handleBodyMouseUp);\n      }\n    }\n  }, {\n    key: \"handleRangeMouseDown\",\n    value: function handleRangeMouseDown(eventData, rangeIndex) {\n      var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n      // Avoid issues on multitouch\n      if (!this.state.selectedRangeIndex) {\n        eventData.preventDefault();\n        eventData.stopPropagation();\n\n        var _getCursorOrTouchPosi = getCursorOrTouchPosition(eventData),\n            clientX = _getCursorOrTouchPosi.clientX,\n            clientY = _getCursorOrTouchPosi.clientY;\n\n        this.setState({\n          selectedRangeIndex: rangeIndex\n        });\n        this.mouseDownOffset = {\n          x: clientX,\n          y: clientY\n        };\n        this.gridBoundaries = this.tableRef.getBoundingClientRect();\n        this.resizeMode = options.resize;\n\n        if (eventData.touches && eventData.touches.length === 2) {\n          this.touchDistanceY = Math.abs(eventData.touches[1].clientY - eventData.touches[0].clientY);\n        }\n      }\n    }\n  }, {\n    key: \"handleGenericMouseMove\",\n    value: function handleGenericMouseMove(eventData) {\n      if (typeof this.state.selectedRangeIndex === 'number') {\n        var _getCursorOrTouchPosi2 = getCursorOrTouchPosition(eventData),\n            clientX = _getCursorOrTouchPosi2.clientX,\n            clientY = _getCursorOrTouchPosi2.clientY;\n\n        var xDiff = clientX - this.gridBoundaries.left; // Todo constant\n\n        var yDiff = clientY - this.gridBoundaries.top - 64;\n        var moveDownCells = Math.round(yDiff / this.props.cellHeight);\n        var moveRightCells = Math.floor(xDiff / DEFAULT_CELL_WIDTH);\n\n        if (eventData.touches && eventData.touches.length === 2) {\n          var newTouchDistanceY = Math.abs(eventData.touches[1].clientY - eventData.touches[0].clientY);\n\n          if (this.touchDistanceY) {\n            var updatedRanges = _toConsumableArray(this.state.ranges);\n\n            var increaseFactor = newTouchDistanceY / this.touchDistanceY;\n            var fromMoment = moment(updatedRanges[this.state.selectedRangeIndex].from);\n            var tillMoment = moment(updatedRanges[this.state.selectedRangeIndex].till);\n            var additionInMinutes = fromMoment.hour() * increaseFactor * 60 - fromMoment.hour() * 60;\n            updatedRanges[this.state.selectedRangeIndex].from = fromMoment.subtract(additionInMinutes / 2, 'minute').toDate().getTime();\n            updatedRanges[this.state.selectedRangeIndex].till = tillMoment.add(additionInMinutes / 2, 'minute').toDate().getTime();\n            eventData.preventDefault();\n            eventData.stopPropagation();\n            this.props.onChange(updatedRanges);\n            this.setState({\n              ranges: updatedRanges\n            });\n          }\n\n          this.touchDistanceY = newTouchDistanceY;\n        } else if (moveDownCells !== 0 || moveRightCells !== 0) {\n          var _updatedRanges = _toConsumableArray(this.state.ranges);\n\n          var newHourValue = moveDownCells * this.props.hoursPerCell;\n          var newWeekDayValue = moveRightCells;\n\n          var _fromMoment = moment(_updatedRanges[this.state.selectedRangeIndex].from);\n\n          var _tillMoment = moment(_updatedRanges[this.state.selectedRangeIndex].till);\n\n          var startOfDay = _fromMoment.clone().startOf('day').toDate().getTime();\n\n          var endOfDay = _fromMoment.clone().endOf('day').toDate().getTime();\n\n          _updatedRanges[this.state.selectedRangeIndex].from = _fromMoment.isoWeekday(newWeekDayValue).toDate().getTime();\n          _updatedRanges[this.state.selectedRangeIndex].till = _tillMoment.isoWeekday(newWeekDayValue).toDate().getTime();\n\n          if (this.resizeMode === 'TOP') {\n            _updatedRanges[this.state.selectedRangeIndex].from = _fromMoment.hour(newHourValue).minute((newHourValue - Math.floor(newHourValue)) * 60).toDate().getTime();\n          }\n\n          if (this.resizeMode === 'BOTTOM') {\n            _updatedRanges[this.state.selectedRangeIndex].till = _tillMoment.hour(newHourValue).minute((newHourValue - Math.floor(newHourValue)) * 60).toDate().getTime();\n          }\n\n          if (!this.resizeMode) {\n            // @Todo what about days that are not 86400s\n            var length = _updatedRanges[this.state.selectedRangeIndex].till - _updatedRanges[this.state.selectedRangeIndex].from;\n            _updatedRanges[this.state.selectedRangeIndex].from = _fromMoment.hour(newHourValue).minute((newHourValue - Math.floor(newHourValue)) * 60).subtract(length / 2000, 's').toDate().getTime();\n            _updatedRanges[this.state.selectedRangeIndex].till = _fromMoment.add(length / 1000, 's').toDate().getTime();\n          }\n\n          var fromTime = _updatedRanges[this.state.selectedRangeIndex].from;\n          var tillTime = _updatedRanges[this.state.selectedRangeIndex].till;\n\n          if (tillTime < fromTime || fromTime < startOfDay && moveRightCells === 0 || tillTime > endOfDay && moveRightCells === 0) {\n            _updatedRanges.splice(this.state.selectedRangeIndex, 1);\n\n            this.props.onChange(_updatedRanges);\n            return this.setState({\n              ranges: _updatedRanges,\n              selectedRangeIndex: null\n            });\n          }\n\n          eventData.preventDefault();\n          eventData.stopPropagation();\n          this.props.onChange(_updatedRanges);\n          this.setState({\n            ranges: _updatedRanges\n          });\n          this.mouseDownOffset = {\n            x: clientX,\n            y: clientY\n          };\n        }\n      }\n    }\n  }, {\n    key: \"handleBodyMouseUp\",\n    value: function handleBodyMouseUp() {\n      this.setState({\n        selectedRangeIndex: null\n      });\n    }\n  }, {\n    key: \"handleTableClick\",\n    value: function handleTableClick(eventData) {\n      if (eventData.target.localName === 'td') {\n        eventData.preventDefault();\n        eventData.stopPropagation();\n        this.gridBoundaries = this.tableRef.getBoundingClientRect();\n\n        var _getCursorOrTouchPosi3 = getCursorOrTouchPosition(eventData),\n            clientX = _getCursorOrTouchPosi3.clientX,\n            clientY = _getCursorOrTouchPosi3.clientY;\n\n        var xDiff = clientX - this.gridBoundaries.left;\n        var yDiff = clientY - this.gridBoundaries.top - 64;\n        var moveDownCells = Math.floor(yDiff / this.props.cellHeight);\n        var moveRightCells = Math.floor(xDiff / DEFAULT_CELL_WIDTH);\n        var newWeekDayValue = moveRightCells;\n        var newHourValue = moveDownCells * this.props.hoursPerCell;\n        var fromMoment = moment(this.state.ranges.length ? this.state.ranges[0].from : Date.now());\n        var newRange = {\n          from: fromMoment.isoWeekday(newWeekDayValue).hour(newHourValue).minute((newHourValue - Math.floor(newHourValue)) * 60).toDate().getTime(),\n          till: fromMoment.add(3, 'hour').toDate().getTime()\n        };\n        var ranges = [].concat(_toConsumableArray(this.state.ranges), [newRange]);\n        this.props.onChange(ranges);\n        this.setState({\n          ranges: ranges\n        });\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this2 = this;\n\n      var methods = {\n        onRangeMouseDown: this.handleRangeMouseDown,\n        onGenericMouseMove: this.handleGenericMouseMove,\n        onDoubleClick: this.handleTableClick,\n        tableRef: function tableRef(table) {\n          return _this2.tableRef = table;\n        }\n      };\n      return WeekScheduleView(Object.assign({}, this.props, this.state, methods));\n    }\n  }, {\n    key: \"__reactstandin__regenerateByEval\",\n    // @ts-ignore\n    value: function __reactstandin__regenerateByEval(key, code) {\n      // @ts-ignore\n      this[key] = eval(code);\n    }\n  }]);\n\n  return WeekSchedule;\n}(Component);\n\nWeekSchedule.propTypes = {\n  className: PropTypes.string,\n  ranges: PropTypes.arrayOf(PropTypes.shape({\n    from: PropTypes.number,\n    till: PropTypes.number\n  })),\n  cellHeight: PropTypes.number,\n  hoursPerCell: PropTypes.number,\n  cellsPerTimeLabel: PropTypes.number,\n  onChange: PropTypes.func.isRequired\n};\nWeekSchedule.defaultProps = {\n  cellHeight: DEFAULT_CELL_HEIGHT,\n  hoursPerCell: DEFAULT_HOURS_PER_CELL,\n  cellsPerTimeLabel: DEFAULT_CELLS_PER_TIME_LABEL\n};\nWeekSchedule.propExamples = {\n  className: '',\n  ranges: [{\n    from: new Date('2018-10-20T08:00:00').getTime(),\n    till: new Date('2018-10-20T17:00:00').getTime()\n  }],\n  cellHeight: DEFAULT_CELL_HEIGHT,\n  hoursPerCell: DEFAULT_HOURS_PER_CELL,\n  cellsPerTimeLabel: DEFAULT_CELLS_PER_TIME_LABEL\n};\nvar _default = WeekSchedule;\nexport default _default;\n;\n\n(function () {\n  var reactHotLoader = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).default;\n\n  if (!reactHotLoader) {\n    return;\n  }\n\n  reactHotLoader.register(rangeEquals, \"rangeEquals\", \"/Users/jakobkerkhove/alegrify/react-alegrify-ui/lib/week-schedule/index.js\");\n  reactHotLoader.register(WeekSchedule, \"WeekSchedule\", \"/Users/jakobkerkhove/alegrify/react-alegrify-ui/lib/week-schedule/index.js\");\n  reactHotLoader.register(_default, \"default\", \"/Users/jakobkerkhove/alegrify/react-alegrify-ui/lib/week-schedule/index.js\");\n})();\n\n;\n\n(function () {\n  var leaveModule = (typeof reactHotLoaderGlobal !== 'undefined' ? reactHotLoaderGlobal : require('react-hot-loader')).leaveModule;\n  leaveModule && leaveModule(module);\n})();\n\nWeekSchedule.__docgenInfo = {\n  \"description\": \"\",\n  \"methods\": [{\n    \"name\": \"handleRangeMouseDown\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"eventData\",\n      \"type\": null\n    }, {\n      \"name\": \"rangeIndex\",\n      \"type\": null\n    }, {\n      \"name\": \"options\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"handleGenericMouseMove\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"eventData\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }, {\n    \"name\": \"handleBodyMouseUp\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [],\n    \"returns\": null\n  }, {\n    \"name\": \"handleTableClick\",\n    \"docblock\": null,\n    \"modifiers\": [],\n    \"params\": [{\n      \"name\": \"eventData\",\n      \"type\": null\n    }],\n    \"returns\": null\n  }],\n  \"displayName\": \"WeekSchedule\",\n  \"props\": {\n    \"cellHeight\": {\n      \"defaultValue\": {\n        \"value\": \"DEFAULT_CELL_HEIGHT\",\n        \"computed\": true\n      },\n      \"type\": {\n        \"name\": \"number\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"hoursPerCell\": {\n      \"defaultValue\": {\n        \"value\": \"DEFAULT_HOURS_PER_CELL\",\n        \"computed\": true\n      },\n      \"type\": {\n        \"name\": \"number\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"cellsPerTimeLabel\": {\n      \"defaultValue\": {\n        \"value\": \"DEFAULT_CELLS_PER_TIME_LABEL\",\n        \"computed\": true\n      },\n      \"type\": {\n        \"name\": \"number\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"className\": {\n      \"type\": {\n        \"name\": \"string\"\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"ranges\": {\n      \"type\": {\n        \"name\": \"arrayOf\",\n        \"value\": {\n          \"name\": \"shape\",\n          \"value\": {\n            \"from\": {\n              \"name\": \"number\",\n              \"required\": false\n            },\n            \"till\": {\n              \"name\": \"number\",\n              \"required\": false\n            }\n          }\n        }\n      },\n      \"required\": false,\n      \"description\": \"\"\n    },\n    \"onChange\": {\n      \"type\": {\n        \"name\": \"func\"\n      },\n      \"required\": true,\n      \"description\": \"\"\n    }\n  }\n};",{"version":3,"sources":["/Users/jakobkerkhove/alegrify/react-alegrify-ui/lib/week-schedule/index.js"],"names":["React","Component","moment","PropTypes","WeekScheduleView","DEFAULT_CELL_HEIGHT","DEFAULT_CELL_WIDTH","DEFAULT_HOURS_PER_CELL","DEFAULT_CELLS_PER_TIME_LABEL","getCursorOrTouchPosition","rangeEquals","rangeA","rangeB","strA","map","range","from","till","join","strB","WeekSchedule","handleRangeMouseDown","bind","handleGenericMouseMove","handleBodyMouseUp","handleTableClick","setState","selectedRangeIndex","ranges","props","mouseDownOffset","x","y","document","body","addEventListener","newProps","removeEventListener","eventData","rangeIndex","options","state","preventDefault","stopPropagation","clientX","clientY","gridBoundaries","tableRef","getBoundingClientRect","resizeMode","resize","touches","length","touchDistanceY","Math","abs","xDiff","left","yDiff","top","moveDownCells","round","cellHeight","moveRightCells","floor","newTouchDistanceY","updatedRanges","increaseFactor","fromMoment","tillMoment","additionInMinutes","hour","subtract","toDate","getTime","add","onChange","newHourValue","hoursPerCell","newWeekDayValue","startOfDay","clone","startOf","endOfDay","endOf","isoWeekday","minute","fromTime","tillTime","splice","target","localName","Date","now","newRange","methods","onRangeMouseDown","onGenericMouseMove","onDoubleClick","table","Object","assign","propTypes","className","string","arrayOf","shape","number","cellsPerTimeLabel","func","isRequired","defaultProps","propExamples"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;;;;;;;;;;AAcA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,QAAnB;AACA,OAAOC,SAAP,MAAsB,YAAtB;AAEA,OAAOC,gBAAP,MAA6B,QAA7B;AAEA,SACIC,mBADJ,EAEIC,kBAFJ,EAGIC,sBAHJ,EAIIC,4BAJJ,QAKO,aALP;AAMA,SAASC,wBAAT,QAAyC,WAAzC;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAACC,MAAD,EAASC,MAAT,EAAoB;AACpC,MAAMC,IAAI,GAAG,CAACF,MAAM,IAAI,EAAX,EAAeG,GAAf,CAAmB,UAAAC,KAAK;AAAA,qBAAOA,KAAK,CAACC,IAAb,cAAqBD,KAAK,CAACE,IAA3B;AAAA,GAAxB,EAA2DC,IAA3D,CAAgE,GAAhE,CAAb;AACA,MAAMC,IAAI,GAAG,CAACP,MAAM,IAAI,EAAX,EAAeE,GAAf,CAAmB,UAAAC,KAAK;AAAA,qBAAOA,KAAK,CAACC,IAAb,cAAqBD,KAAK,CAACE,IAA3B;AAAA,GAAxB,EAA2DC,IAA3D,CAAgE,GAAhE,CAAb;AAEA,SAAOL,IAAI,KAAKM,IAAhB;AACH,CALD;;IAQMC,Y;;;;;AACF,0BAAc;AAAA;;AAAA;;AACV;AAEA,UAAKC,oBAAL,GAA4B,MAAKA,oBAAL,CAA0BC,IAA1B,+BAA5B;AACA,UAAKC,sBAAL,GAA8B,MAAKA,sBAAL,CAA4BD,IAA5B,+BAA9B;AACA,UAAKE,iBAAL,GAAyB,MAAKA,iBAAL,CAAuBF,IAAvB,+BAAzB;AACA,UAAKG,gBAAL,GAAwB,MAAKA,gBAAL,CAAsBH,IAAtB,+BAAxB;AANU;AAOb;;;;yCAEoB;AACjB,WAAKI,QAAL,CAAc;AACVC,QAAAA,kBAAkB,EAAE,IADV;AAEVC,QAAAA,MAAM,EAAE,KAAKC,KAAL,CAAWD,MAAX,IAAqB;AAFnB,OAAd;AAIA,WAAKE,eAAL,GAAuB;AAAEC,QAAAA,CAAC,EAAE,IAAL;AAAWC,QAAAA,CAAC,EAAE;AAAd,OAAvB;;AAEA,UACI,OAAOC,QAAP,KAAoB,WAApB,IACA,OAAOA,QAAQ,CAACC,IAAhB,KAAyB,WADzB,IAEA,OAAOD,QAAQ,CAACC,IAAT,CAAcC,gBAArB,KAA0C,UAH9C,EAIE;AACEF,QAAAA,QAAQ,CAACE,gBAAT,CAA0B,SAA1B,EAAqC,KAAKX,iBAA1C;AACAS,QAAAA,QAAQ,CAACE,gBAAT,CAA0B,UAA1B,EAAsC,KAAKX,iBAA3C;AACH;AACJ;;;8CAEyBY,Q,EAAU;AAChC,UAAI,CAAC1B,WAAW,CAAC0B,QAAQ,CAACR,MAAV,EAAkB,KAAKC,KAAL,CAAWD,MAA7B,CAAhB,EAAsD;AAClD,aAAKF,QAAL,CAAc;AACVC,UAAAA,kBAAkB,EAAE,IADV;AAEVC,UAAAA,MAAM,EAAE,KAAKC,KAAL,CAAWD,MAAX,IAAqB;AAFnB,SAAd;AAIH;AACJ;;;2CAEsB;AACnB,UACI,OAAOK,QAAP,KAAoB,WAApB,IACA,OAAOA,QAAQ,CAACC,IAAhB,KAAyB,WADzB,IAEA,OAAOD,QAAQ,CAACC,IAAT,CAAcG,mBAArB,KAA6C,UAHjD,EAIE;AACEJ,QAAAA,QAAQ,CAACI,mBAAT,CAA6B,SAA7B,EAAwC,KAAKb,iBAA7C;AACAS,QAAAA,QAAQ,CAACE,gBAAT,CAA0B,UAA1B,EAAsC,KAAKX,iBAA3C;AACH;AACJ;;;yCAEoBc,S,EAAWC,U,EAA0B;AAAA,UAAdC,OAAc,uEAAJ,EAAI;;AAEtD;AACA,UAAI,CAAC,KAAKC,KAAL,CAAWd,kBAAhB,EAAoC;AAChCW,QAAAA,SAAS,CAACI,cAAV;AACAJ,QAAAA,SAAS,CAACK,eAAV;;AAFgC,oCAIHlC,wBAAwB,CAAC6B,SAAD,CAJrB;AAAA,YAIxBM,OAJwB,yBAIxBA,OAJwB;AAAA,YAIfC,OAJe,yBAIfA,OAJe;;AAMhC,aAAKnB,QAAL,CAAc;AACVC,UAAAA,kBAAkB,EAAEY;AADV,SAAd;AAGA,aAAKT,eAAL,GAAuB;AAAEC,UAAAA,CAAC,EAAEa,OAAL;AAAcZ,UAAAA,CAAC,EAAEa;AAAjB,SAAvB;AACA,aAAKC,cAAL,GAAsB,KAAKC,QAAL,CAAcC,qBAAd,EAAtB;AACA,aAAKC,UAAL,GAAkBT,OAAO,CAACU,MAA1B;;AAEA,YAAIZ,SAAS,CAACa,OAAV,IAAqBb,SAAS,CAACa,OAAV,CAAkBC,MAAlB,KAA6B,CAAtD,EAAyD;AACrD,eAAKC,cAAL,GAAsBC,IAAI,CAACC,GAAL,CAASjB,SAAS,CAACa,OAAV,CAAkB,CAAlB,EAAqBN,OAArB,GAA+BP,SAAS,CAACa,OAAV,CAAkB,CAAlB,EAAqBN,OAA7D,CAAtB;AACH;AACJ;AACJ;;;2CAEsBP,S,EAAW;AAC9B,UAAI,OAAO,KAAKG,KAAL,CAAWd,kBAAlB,KAAyC,QAA7C,EAAuD;AAAA,qCACtBlB,wBAAwB,CAAC6B,SAAD,CADF;AAAA,YAC3CM,OAD2C,0BAC3CA,OAD2C;AAAA,YAClCC,OADkC,0BAClCA,OADkC;;AAGnD,YAAMW,KAAK,GAAGZ,OAAO,GAAG,KAAKE,cAAL,CAAoBW,IAA5C,CAHmD,CAInD;;AACA,YAAMC,KAAK,GAAGb,OAAO,GAAG,KAAKC,cAAL,CAAoBa,GAA9B,GAAoC,EAAlD;AAEA,YAAMC,aAAa,GAAGN,IAAI,CAACO,KAAL,CAAWH,KAAK,GAAG,KAAK7B,KAAL,CAAWiC,UAA9B,CAAtB;AACA,YAAMC,cAAc,GAAGT,IAAI,CAACU,KAAL,CAAWR,KAAK,GAAGlD,kBAAnB,CAAvB;;AAEA,YAAIgC,SAAS,CAACa,OAAV,IAAqBb,SAAS,CAACa,OAAV,CAAkBC,MAAlB,KAA6B,CAAtD,EAAyD;AACrD,cAAMa,iBAAiB,GAAGX,IAAI,CAACC,GAAL,CAASjB,SAAS,CAACa,OAAV,CAAkB,CAAlB,EAAqBN,OAArB,GAA+BP,SAAS,CAACa,OAAV,CAAkB,CAAlB,EAAqBN,OAA7D,CAA1B;;AAEA,cAAI,KAAKQ,cAAT,EAAyB;AACrB,gBAAMa,aAAa,sBAAO,KAAKzB,KAAL,CAAWb,MAAlB,CAAnB;;AACA,gBAAMuC,cAAc,GAAGF,iBAAiB,GAAG,KAAKZ,cAAhD;AAEA,gBAAMe,UAAU,GAAGlE,MAAM,CAACgE,aAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CX,IAA9C,CAAzB;AACA,gBAAMqD,UAAU,GAAGnE,MAAM,CAACgE,aAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CV,IAA9C,CAAzB;AAEA,gBAAMqD,iBAAiB,GAAGF,UAAU,CAACG,IAAX,KAAoBJ,cAApB,GAAqC,EAArC,GAA0CC,UAAU,CAACG,IAAX,KAAoB,EAAxF;AAEAL,YAAAA,aAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CX,IAA7C,GAAoDoD,UAAU,CAACI,QAAX,CAAoBF,iBAAiB,GAAG,CAAxC,EAA2C,QAA3C,EAAqDG,MAArD,GAA8DC,OAA9D,EAApD;AACAR,YAAAA,aAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CV,IAA7C,GAAoDoD,UAAU,CAACM,GAAX,CAAeL,iBAAiB,GAAG,CAAnC,EAAsC,QAAtC,EAAgDG,MAAhD,GAAyDC,OAAzD,EAApD;AAEApC,YAAAA,SAAS,CAACI,cAAV;AACAJ,YAAAA,SAAS,CAACK,eAAV;AAEA,iBAAKd,KAAL,CAAW+C,QAAX,CAAoBV,aAApB;AACA,iBAAKxC,QAAL,CAAc;AACVE,cAAAA,MAAM,EAAEsC;AADE,aAAd;AAGH;;AAED,eAAKb,cAAL,GAAsBY,iBAAtB;AACH,SAzBD,MA0BK,IAAIL,aAAa,KAAK,CAAlB,IAAuBG,cAAc,KAAK,CAA9C,EAAiD;AAClD,cAAMG,cAAa,sBAAO,KAAKzB,KAAL,CAAWb,MAAlB,CAAnB;;AAEA,cAAMiD,YAAY,GAAIjB,aAAa,GAAG,KAAK/B,KAAL,CAAWiD,YAAjD;AACA,cAAMC,eAAe,GAAGhB,cAAxB;;AAEA,cAAMK,WAAU,GAAGlE,MAAM,CAACgE,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CX,IAA9C,CAAzB;;AACA,cAAMqD,WAAU,GAAGnE,MAAM,CAACgE,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CV,IAA9C,CAAzB;;AAEA,cAAM+D,UAAU,GAAGZ,WAAU,CAACa,KAAX,GAAmBC,OAAnB,CAA2B,KAA3B,EAAkCT,MAAlC,GAA2CC,OAA3C,EAAnB;;AACA,cAAMS,QAAQ,GAAGf,WAAU,CAACa,KAAX,GAAmBG,KAAnB,CAAyB,KAAzB,EAAgCX,MAAhC,GAAyCC,OAAzC,EAAjB;;AAEAR,UAAAA,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CX,IAA7C,GAAoDoD,WAAU,CAACiB,UAAX,CAAsBN,eAAtB,EAAuCN,MAAvC,GAAgDC,OAAhD,EAApD;AACAR,UAAAA,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CV,IAA7C,GAAoDoD,WAAU,CAACgB,UAAX,CAAsBN,eAAtB,EAAuCN,MAAvC,GAAgDC,OAAhD,EAApD;;AAEA,cAAI,KAAKzB,UAAL,KAAoB,KAAxB,EAA+B;AAC3BiB,YAAAA,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CX,IAA7C,GAAoDoD,WAAU,CAACG,IAAX,CAAgBM,YAAhB,EAA8BS,MAA9B,CAAqC,CAACT,YAAY,GAAGvB,IAAI,CAACU,KAAL,CAAWa,YAAX,CAAhB,IAA4C,EAAjF,EAAqFJ,MAArF,GAA8FC,OAA9F,EAApD;AACH;;AAED,cAAI,KAAKzB,UAAL,KAAoB,QAAxB,EAAkC;AAC9BiB,YAAAA,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CV,IAA7C,GAAoDoD,WAAU,CAACE,IAAX,CAAgBM,YAAhB,EAA8BS,MAA9B,CAAqC,CAACT,YAAY,GAAGvB,IAAI,CAACU,KAAL,CAAWa,YAAX,CAAhB,IAA4C,EAAjF,EAAqFJ,MAArF,GAA8FC,OAA9F,EAApD;AACH;;AAED,cAAI,CAAC,KAAKzB,UAAV,EAAsB;AAClB;AACA,gBAAMG,MAAM,GAAGc,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CV,IAA7C,GAAoDiD,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CX,IAAhH;AACAkD,YAAAA,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CX,IAA7C,GAAoDoD,WAAU,CACzDG,IAD+C,CAC1CM,YAD0C,EAE/CS,MAF+C,CAExC,CAACT,YAAY,GAAGvB,IAAI,CAACU,KAAL,CAAWa,YAAX,CAAhB,IAA4C,EAFJ,EAG/CL,QAH+C,CAGtCpB,MAAM,GAAG,IAH6B,EAGvB,GAHuB,EAI/CqB,MAJ+C,GAK/CC,OAL+C,EAApD;AAOAR,YAAAA,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CV,IAA7C,GAAoDmD,WAAU,CAACO,GAAX,CAAevB,MAAM,GAAG,IAAxB,EAA8B,GAA9B,EAAmCqB,MAAnC,GAA4CC,OAA5C,EAApD;AACH;;AAED,cAAMa,QAAQ,GAAGrB,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CX,IAA9D;AACA,cAAMwE,QAAQ,GAAGtB,cAAa,CAAC,KAAKzB,KAAL,CAAWd,kBAAZ,CAAb,CAA6CV,IAA9D;;AAGA,cACIuE,QAAQ,GAAGD,QAAX,IACAA,QAAQ,GAAGP,UAAX,IAAyBjB,cAAc,KAAK,CAD5C,IAEAyB,QAAQ,GAAGL,QAAX,IAAuBpB,cAAc,KAAK,CAH9C,EAIE;AACEG,YAAAA,cAAa,CAACuB,MAAd,CAAqB,KAAKhD,KAAL,CAAWd,kBAAhC,EAAoD,CAApD;;AAEA,iBAAKE,KAAL,CAAW+C,QAAX,CAAoBV,cAApB;AACA,mBAAO,KAAKxC,QAAL,CAAc;AACjBE,cAAAA,MAAM,EAAEsC,cADS;AAEjBvC,cAAAA,kBAAkB,EAAE;AAFH,aAAd,CAAP;AAIH;;AAEDW,UAAAA,SAAS,CAACI,cAAV;AACAJ,UAAAA,SAAS,CAACK,eAAV;AAEA,eAAKd,KAAL,CAAW+C,QAAX,CAAoBV,cAApB;AACA,eAAKxC,QAAL,CAAc;AACVE,YAAAA,MAAM,EAAEsC;AADE,WAAd;AAIA,eAAKpC,eAAL,GAAuB;AAAEC,YAAAA,CAAC,EAAEa,OAAL;AAAeZ,YAAAA,CAAC,EAAEa;AAAlB,WAAvB;AACH;AAEJ;AACJ;;;wCAEmB;AAChB,WAAKnB,QAAL,CAAc;AAAEC,QAAAA,kBAAkB,EAAE;AAAtB,OAAd;AACH;;;qCAEgBW,S,EAAW;AACxB,UAAIA,SAAS,CAACoD,MAAV,CAAiBC,SAAjB,KAA+B,IAAnC,EAAyC;AACrCrD,QAAAA,SAAS,CAACI,cAAV;AACAJ,QAAAA,SAAS,CAACK,eAAV;AAEA,aAAKG,cAAL,GAAsB,KAAKC,QAAL,CAAcC,qBAAd,EAAtB;;AAJqC,qCAMRvC,wBAAwB,CAAC6B,SAAD,CANhB;AAAA,YAM7BM,OAN6B,0BAM7BA,OAN6B;AAAA,YAMpBC,OANoB,0BAMpBA,OANoB;;AAQrC,YAAMW,KAAK,GAAGZ,OAAO,GAAG,KAAKE,cAAL,CAAoBW,IAA5C;AACA,YAAMC,KAAK,GAAGb,OAAO,GAAG,KAAKC,cAAL,CAAoBa,GAA9B,GAAoC,EAAlD;AAEA,YAAMC,aAAa,GAAGN,IAAI,CAACU,KAAL,CAAWN,KAAK,GAAG,KAAK7B,KAAL,CAAWiC,UAA9B,CAAtB;AACA,YAAMC,cAAc,GAAGT,IAAI,CAACU,KAAL,CAAWR,KAAK,GAAGlD,kBAAnB,CAAvB;AACA,YAAMyE,eAAe,GAAGhB,cAAxB;AAEA,YAAMc,YAAY,GAAIjB,aAAa,GAAG,KAAK/B,KAAL,CAAWiD,YAAjD;AAEA,YAAMV,UAAU,GAAGlE,MAAM,CAAC,KAAKuC,KAAL,CAAWb,MAAX,CAAkBwB,MAAlB,GAA2B,KAAKX,KAAL,CAAWb,MAAX,CAAkB,CAAlB,EAAqBZ,IAAhD,GAAuD4E,IAAI,CAACC,GAAL,EAAxD,CAAzB;AAEA,YAAMC,QAAQ,GAAG;AACb9E,UAAAA,IAAI,EAAEoD,UAAU,CACXiB,UADC,CACUN,eADV,EAEDR,IAFC,CAEIM,YAFJ,EAGDS,MAHC,CAGM,CAACT,YAAY,GAAGvB,IAAI,CAACU,KAAL,CAAWa,YAAX,CAAhB,IAA4C,EAHlD,EAIDJ,MAJC,GAKDC,OALC,EADO;AAObzD,UAAAA,IAAI,EAAEmD,UAAU,CAACO,GAAX,CAAe,CAAf,EAAkB,MAAlB,EAA0BF,MAA1B,GAAmCC,OAAnC;AAPO,SAAjB;AAUA,YAAM9C,MAAM,gCAAO,KAAKa,KAAL,CAAWb,MAAlB,IAA0BkE,QAA1B,EAAZ;AAEA,aAAKjE,KAAL,CAAW+C,QAAX,CAAoBhD,MAApB;AACA,aAAKF,QAAL,CAAc;AACVE,UAAAA,MAAM,EAANA;AADU,SAAd;AAGH;AACJ;;;6BAEQ;AAAA;;AACL,UAAMmE,OAAO,GAAG;AACZC,QAAAA,gBAAgB,EAAE,KAAK3E,oBADX;AAEZ4E,QAAAA,kBAAkB,EAAE,KAAK1E,sBAFb;AAGZ2E,QAAAA,aAAa,EAAE,KAAKzE,gBAHR;AAIZsB,QAAAA,QAAQ,EAAE,kBAACoD,KAAD;AAAA,iBAAW,MAAI,CAACpD,QAAL,GAAgBoD,KAA3B;AAAA;AAJE,OAAhB;AAOA,aAAO/F,gBAAgB,CAACgG,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkB,KAAKxE,KAAvB,EAA8B,KAAKY,KAAnC,EAA0CsD,OAA1C,CAAD,CAAvB;AACH;;;;;;;;;;;EAlOsB9F,S;;AAqO3BmB,YAAY,CAACkF,SAAb,GAAyB;AACrBC,EAAAA,SAAS,EAAEpG,SAAS,CAACqG,MADA;AAErB5E,EAAAA,MAAM,EAAEzB,SAAS,CAACsG,OAAV,CACJtG,SAAS,CAACuG,KAAV,CAAgB;AACZ1F,IAAAA,IAAI,EAAEb,SAAS,CAACwG,MADJ;AAEZ1F,IAAAA,IAAI,EAAEd,SAAS,CAACwG;AAFJ,GAAhB,CADI,CAFa;AAQrB7C,EAAAA,UAAU,EAAE3D,SAAS,CAACwG,MARD;AASrB7B,EAAAA,YAAY,EAAE3E,SAAS,CAACwG,MATH;AAUrBC,EAAAA,iBAAiB,EAAEzG,SAAS,CAACwG,MAVR;AAWrB/B,EAAAA,QAAQ,EAAEzE,SAAS,CAAC0G,IAAV,CAAeC;AAXJ,CAAzB;AAaA1F,YAAY,CAAC2F,YAAb,GAA4B;AACxBjD,EAAAA,UAAU,EAAEzD,mBADY;AAExByE,EAAAA,YAAY,EAAEvE,sBAFU;AAGxBqG,EAAAA,iBAAiB,EAAEpG;AAHK,CAA5B;AAKAY,YAAY,CAAC4F,YAAb,GAA4B;AACxBT,EAAAA,SAAS,EAAE,EADa;AAExB3E,EAAAA,MAAM,EAAE,CACJ;AACIZ,IAAAA,IAAI,EAAE,IAAI4E,IAAJ,CAAS,qBAAT,EAAgClB,OAAhC,EADV;AAEIzD,IAAAA,IAAI,EAAE,IAAI2E,IAAJ,CAAS,qBAAT,EAAgClB,OAAhC;AAFV,GADI,CAFgB;AAQxBZ,EAAAA,UAAU,EAAEzD,mBARY;AASxByE,EAAAA,YAAY,EAAEvE,sBATU;AAUxBqG,EAAAA,iBAAiB,EAAEpG;AAVK,CAA5B;eAaeY,Y;AAAf;;;;;;;;;;0BA5QMV,W;0BAQAU,Y","sourcesContent":["/*\n\n    TODOS\n    =============\n\n    * Multitouch resize gesture\n    * Test in other timezones\n    * Button to add range\n    * Caniuse clientX/clientY? => Seems like it\n    * what about days that are not 86400s\n    * Test RTL\n\n*/\n\nimport React, { Component } from 'react';\nimport moment from 'moment';\nimport PropTypes from 'prop-types';\n\nimport WeekScheduleView from './view';\n\nimport {\n    DEFAULT_CELL_HEIGHT,\n    DEFAULT_CELL_WIDTH,\n    DEFAULT_HOURS_PER_CELL,\n    DEFAULT_CELLS_PER_TIME_LABEL\n} from './constants';\nimport { getCursorOrTouchPosition } from './helpers';\n\nconst rangeEquals = (rangeA, rangeB) => {\n    const strA = (rangeA || []).map(range => `${range.from}-${range.till}`).join('|');\n    const strB = (rangeB || []).map(range => `${range.from}-${range.till}`).join('|');\n\n    return strA === strB;\n};\n\n\nclass WeekSchedule extends Component {\n    constructor() {\n        super();\n\n        this.handleRangeMouseDown = this.handleRangeMouseDown.bind(this);\n        this.handleGenericMouseMove = this.handleGenericMouseMove.bind(this);\n        this.handleBodyMouseUp = this.handleBodyMouseUp.bind(this);\n        this.handleTableClick = this.handleTableClick.bind(this);\n    }\n\n    componentWillMount() {\n        this.setState({\n            selectedRangeIndex: null,\n            ranges: this.props.ranges || []\n        });\n        this.mouseDownOffset = { x: null, y: null };\n\n        if (\n            typeof document !== 'undefined' &&\n            typeof document.body !== 'undefined' &&\n            typeof document.body.addEventListener === 'function'\n        ) {\n            document.addEventListener('mouseup', this.handleBodyMouseUp);\n            document.addEventListener('touchend', this.handleBodyMouseUp);\n        }\n    }\n\n    componentWillReceiveProps(newProps) {\n        if (!rangeEquals(newProps.ranges, this.props.ranges)) {\n            this.setState({\n                selectedRangeIndex: null,\n                ranges: this.props.ranges || []\n            });\n        }\n    }\n\n    componentWillUnmount() {\n        if (\n            typeof document !== 'undefined' &&\n            typeof document.body !== 'undefined' &&\n            typeof document.body.removeEventListener === 'function'\n        ) {\n            document.removeEventListener('mouseup', this.handleBodyMouseUp);\n            document.addEventListener('touchend', this.handleBodyMouseUp);\n        }\n    }\n\n    handleRangeMouseDown(eventData, rangeIndex, options = {}) {\n\n        // Avoid issues on multitouch\n        if (!this.state.selectedRangeIndex) {\n            eventData.preventDefault();\n            eventData.stopPropagation();\n            \n            const { clientX, clientY } = getCursorOrTouchPosition(eventData);\n\n            this.setState({\n                selectedRangeIndex: rangeIndex\n            });\n            this.mouseDownOffset = { x: clientX, y: clientY };\n            this.gridBoundaries = this.tableRef.getBoundingClientRect();\n            this.resizeMode = options.resize;\n\n            if (eventData.touches && eventData.touches.length === 2) {\n                this.touchDistanceY = Math.abs(eventData.touches[1].clientY - eventData.touches[0].clientY);\n            }\n        }\n    }\n\n    handleGenericMouseMove(eventData) {\n        if (typeof this.state.selectedRangeIndex === 'number') {\n            const { clientX, clientY } = getCursorOrTouchPosition(eventData);\n\n            const xDiff = clientX - this.gridBoundaries.left;\n            // Todo constant\n            const yDiff = clientY - this.gridBoundaries.top - 64;\n\n            const moveDownCells = Math.round(yDiff / this.props.cellHeight);\n            const moveRightCells = Math.floor(xDiff / DEFAULT_CELL_WIDTH);\n\n            if (eventData.touches && eventData.touches.length === 2) {\n                const newTouchDistanceY = Math.abs(eventData.touches[1].clientY - eventData.touches[0].clientY);\n\n                if (this.touchDistanceY) {\n                    const updatedRanges = [...this.state.ranges];\n                    const increaseFactor = newTouchDistanceY / this.touchDistanceY;\n\n                    const fromMoment = moment(updatedRanges[this.state.selectedRangeIndex].from);\n                    const tillMoment = moment(updatedRanges[this.state.selectedRangeIndex].till);\n\n                    const additionInMinutes = fromMoment.hour() * increaseFactor * 60 - fromMoment.hour() * 60;\n\n                    updatedRanges[this.state.selectedRangeIndex].from = fromMoment.subtract(additionInMinutes / 2, 'minute').toDate().getTime();\n                    updatedRanges[this.state.selectedRangeIndex].till = tillMoment.add(additionInMinutes / 2, 'minute').toDate().getTime();\n\n                    eventData.preventDefault();\n                    eventData.stopPropagation();\n\n                    this.props.onChange(updatedRanges);\n                    this.setState({\n                        ranges: updatedRanges,\n                    });\n                }\n\n                this.touchDistanceY = newTouchDistanceY;\n            }\n            else if (moveDownCells !== 0 || moveRightCells !== 0) {\n                const updatedRanges = [...this.state.ranges];\n\n                const newHourValue  = moveDownCells * this.props.hoursPerCell;\n                const newWeekDayValue = moveRightCells;\n\n                const fromMoment = moment(updatedRanges[this.state.selectedRangeIndex].from);\n                const tillMoment = moment(updatedRanges[this.state.selectedRangeIndex].till);\n\n                const startOfDay = fromMoment.clone().startOf('day').toDate().getTime();\n                const endOfDay = fromMoment.clone().endOf('day').toDate().getTime();\n\n                updatedRanges[this.state.selectedRangeIndex].from = fromMoment.isoWeekday(newWeekDayValue).toDate().getTime();\n                updatedRanges[this.state.selectedRangeIndex].till = tillMoment.isoWeekday(newWeekDayValue).toDate().getTime(); \n\n                if (this.resizeMode === 'TOP') {\n                    updatedRanges[this.state.selectedRangeIndex].from = fromMoment.hour(newHourValue).minute((newHourValue - Math.floor(newHourValue)) * 60).toDate().getTime();\n                }\n\n                if (this.resizeMode === 'BOTTOM') {\n                    updatedRanges[this.state.selectedRangeIndex].till = tillMoment.hour(newHourValue).minute((newHourValue - Math.floor(newHourValue)) * 60).toDate().getTime();\n                }\n\n                if (!this.resizeMode) {\n                    // @Todo what about days that are not 86400s\n                    const length = updatedRanges[this.state.selectedRangeIndex].till - updatedRanges[this.state.selectedRangeIndex].from;\n                    updatedRanges[this.state.selectedRangeIndex].from = fromMoment\n                        .hour(newHourValue)\n                        .minute((newHourValue - Math.floor(newHourValue)) * 60)\n                        .subtract(length / 2000, 's')\n                        .toDate()\n                        .getTime();\n\n                    updatedRanges[this.state.selectedRangeIndex].till = fromMoment.add(length / 1000, 's').toDate().getTime();\n                }\n\n                const fromTime = updatedRanges[this.state.selectedRangeIndex].from;\n                const tillTime = updatedRanges[this.state.selectedRangeIndex].till;\n\n\n                if (\n                    tillTime < fromTime ||\n                    fromTime < startOfDay && moveRightCells === 0 ||\n                    tillTime > endOfDay && moveRightCells === 0\n                ) {\n                    updatedRanges.splice(this.state.selectedRangeIndex, 1);\n\n                    this.props.onChange(updatedRanges);\n                    return this.setState({\n                        ranges: updatedRanges,\n                        selectedRangeIndex: null\n                    });\n                }\n\n                eventData.preventDefault();\n                eventData.stopPropagation();\n                \n                this.props.onChange(updatedRanges);\n                this.setState({\n                    ranges: updatedRanges,\n                });\n\n                this.mouseDownOffset = { x: clientX , y: clientY };\n            }\n\n        }\n    }\n\n    handleBodyMouseUp() {\n        this.setState({ selectedRangeIndex: null });\n    }\n\n    handleTableClick(eventData) {\n        if (eventData.target.localName === 'td') {\n            eventData.preventDefault();\n            eventData.stopPropagation();\n\n            this.gridBoundaries = this.tableRef.getBoundingClientRect();\n\n            const { clientX, clientY } = getCursorOrTouchPosition(eventData);\n\n            const xDiff = clientX - this.gridBoundaries.left;\n            const yDiff = clientY - this.gridBoundaries.top - 64;\n\n            const moveDownCells = Math.floor(yDiff / this.props.cellHeight);\n            const moveRightCells = Math.floor(xDiff / DEFAULT_CELL_WIDTH);\n            const newWeekDayValue = moveRightCells;\n\n            const newHourValue  = moveDownCells * this.props.hoursPerCell;\n\n            const fromMoment = moment(this.state.ranges.length ? this.state.ranges[0].from : Date.now());\n\n            const newRange = {\n                from: fromMoment\n                    .isoWeekday(newWeekDayValue)\n                    .hour(newHourValue)\n                    .minute((newHourValue - Math.floor(newHourValue)) * 60)\n                    .toDate()\n                    .getTime(),\n                till: fromMoment.add(3, 'hour').toDate().getTime()\n            };\n\n            const ranges = [...this.state.ranges, newRange];\n\n            this.props.onChange(ranges);\n            this.setState({\n                ranges,\n            });\n        }\n    }\n\n    render() {\n        const methods = {\n            onRangeMouseDown: this.handleRangeMouseDown,\n            onGenericMouseMove: this.handleGenericMouseMove,\n            onDoubleClick: this.handleTableClick,\n            tableRef: (table) => this.tableRef = table\n        };\n\n        return WeekScheduleView(Object.assign({}, this.props, this.state, methods));\n    }\n}\n\nWeekSchedule.propTypes = {\n    className: PropTypes.string,\n    ranges: PropTypes.arrayOf(\n        PropTypes.shape({\n            from: PropTypes.number,\n            till: PropTypes.number\n        })\n    ),\n    cellHeight: PropTypes.number,\n    hoursPerCell: PropTypes.number,\n    cellsPerTimeLabel: PropTypes.number,\n    onChange: PropTypes.func.isRequired\n};\nWeekSchedule.defaultProps = {\n    cellHeight: DEFAULT_CELL_HEIGHT,\n    hoursPerCell: DEFAULT_HOURS_PER_CELL,\n    cellsPerTimeLabel: DEFAULT_CELLS_PER_TIME_LABEL\n};\nWeekSchedule.propExamples = {\n    className: '',\n    ranges: [\n        {\n            from: new Date('2018-10-20T08:00:00').getTime(),\n            till: new Date('2018-10-20T17:00:00').getTime()\n        }\n    ],\n    cellHeight: DEFAULT_CELL_HEIGHT,\n    hoursPerCell: DEFAULT_HOURS_PER_CELL,\n    cellsPerTimeLabel: DEFAULT_CELLS_PER_TIME_LABEL\n};\n\nexport default WeekSchedule;\n"]}]}